// Code generated by protoc-gen-bff. DO NOT EDIT.
// Version: 1.0.0

package web

import (
	"context"

	"github.com/gin-gonic/gin"
)

// IAuthHandler BFF 接口
type IAuthHandler interface {

	// 登录接口
	Login(ctx context.Context, in *AuthLoginRequest) (*AuthLoginResponse, error)
	// 注册接口
	Register(ctx context.Context, in *AuthRegisterRequest) (*AuthRegisterResponse, error)
	// 找回密码接口
	Forget(ctx context.Context, in *AuthForgetRequest) (*AuthForgetResponse, error)
	// 获取 oauth2.0 跳转地址
	Oauth(ctx context.Context, in *AuthOauthRequest) (*AuthOauthResponse, error)
	// 绑定第三方登录接口
	OauthBind(ctx context.Context, in *AuthOAuthBindRequest) (*AuthOAuthBindResponse, error)
	// 第三方登录接口
	OauthLogin(ctx context.Context, in *AuthOauthLoginRequest) (*AuthOauthLoginResponse, error)
}

// RegisterAuthHandler 注册服务路由处理器
func RegisterAuthHandler(r gin.IRoutes, interceptor interface {
	ShouldProto(c *gin.Context, in any) error
	Do(fn func(ctx *gin.Context) (any, error)) func(c *gin.Context)
}, handler IAuthHandler) {
	if interceptor == nil {
		panic("interceptor is nil")
	}

	if handler == nil {
		panic("handler is nil")
	}

	r.POST("/api/v1/auth/login", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthLoginRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.Login(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/auth/register", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthRegisterRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.Register(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/auth/forget", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthForgetRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.Forget(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/auth/oauth", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthOauthRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.Oauth(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/auth/oauth/bind", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthOAuthBindRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.OauthBind(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/auth/oauth/login", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in AuthOauthLoginRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.OauthLogin(ctx.Request.Context(), &in)
	}))

}
