// Code generated by protoc-gen-bff. DO NOT EDIT.
// Version: 1.0.0

package web

import (
	"context"

	"github.com/gin-gonic/gin"
)

// ICommonHandler BFF 接口
type ICommonHandler interface {

	// 发送短信验证码接口
	//    @Summary 发送短信验证码111222
	SendSms(ctx context.Context, in *CommonSendSmsRequest) (*CommonSendSmsResponse, error)
	// 发送邮件验证码接口
	SendEmail(ctx context.Context, in *CommonSendEmailRequest) (*CommonSendEmailResponse, error)
	//俺们就开始的那
	Test(ctx context.Context, in *CommonSendTestRequest) (*CommonSendTestResponse, error)
}

// RegisterCommonHandler 注册服务路由处理器
func RegisterCommonHandler(r gin.IRoutes, interceptor interface {
	ShouldProto(c *gin.Context, in any) error
	Do(fn func(ctx *gin.Context) (any, error)) func(c *gin.Context)
}, handler ICommonHandler) {
	if interceptor == nil {
		panic("interceptor is nil")
	}

	if handler == nil {
		panic("handler is nil")
	}

	r.POST("/api/v1/common/send-sms", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in CommonSendSmsRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.SendSms(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/common/send-email", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in CommonSendEmailRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.SendEmail(ctx.Request.Context(), &in)
	}))

	r.POST("/api/v1/common/send-test", interceptor.Do(func(ctx *gin.Context) (any, error) {
		var in CommonSendTestRequest
		if err := interceptor.ShouldProto(ctx, &in); err != nil {
			return nil, err
		}

		return handler.Test(ctx.Request.Context(), &in)
	}))

}
